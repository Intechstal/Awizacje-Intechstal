<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Edytuj awizację</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        label { display:block; margin-top:8px; margin-bottom:4px; font-weight:600; }
        input[type="text"], input[type="email"], select, textarea {
            width: 420px; padding:8px; margin-bottom:10px; box-sizing: border-box;
        }
        input[type="submit"] { padding:8px 12px; }
        .note { font-size: 13px; color:#555; margin-bottom:10px; }
    </style>
</head>
<body>
    <h1>Edytuj awizację #{{ awizacja[0] }}</h1>
    <form method="POST">
        <label for="firma">Firma</label>
        <input id="firma" name="firma" type="text" value="{{ awizacja[1] }}" required>

        <label for="rejestracja">Rejestracja</label>
        <input id="rejestracja" name="rejestracja" type="text" value="{{ awizacja[2] }}" required>

        <label for="kierowca">Kierowca</label>
        <input id="kierowca" name="kierowca" type="text" value="{{ awizacja[3] }}" required>

        <label for="email">Email</label>
        <input id="email" name="email" type="email" value="{{ awizacja[4] }}">

        <label for="telefon">Telefon</label>
        <input id="telefon" name="telefon" type="text" value="{{ awizacja[5] }}" required>

        <label for="typ_ladunku">Typ ładunku</label>
        <select id="typ_ladunku" name="typ_ladunku" required>
            {% set opcje = [
                "Odbiór złomu",
                "Odbiór zamówienia",
                "Dostawa materiału",
                "Odbiór zamówienia i dostawa materiału powierzonego",
                "Dostawa palet"
            ] %}
            {% for opcja in opcje %}
                <option value="{{ opcja }}" {% if awizacja[7] == opcja %}selected{% endif %}>
                    {{ opcja }}
                </option>
            {% endfor %}
        </select>

        <label for="waga_ladunku">Waga ładunku</label>
        <input id="waga_ladunku" name="waga_ladunku" type="text" value="{{ awizacja[8] }}">

        <label for="komentarz">Komentarz</label>
        <textarea id="komentarz" name="komentarz">{{ awizacja[9] }}</textarea>

        <p class="note">Wybierz datę/godzinę. Zajęte sloty są oznaczone, ale admin może wybrać dowolny termin.</p>
        <label for="data_godzina">Data i godzina</label>
        <select id="data_godzina" name="data_godzina" required>
            {% for d in dni %}
                <optgroup label="{{ d.strftime('%A %d.%m') }}">
                {% for h in godziny %}
                    {% set slot = d.strftime('%Y-%m-%d') + 'T' + h %}
                    <option value="{{ slot }}" {% if awizacja[6] == slot %}selected{% endif %}>
                        {{ d.strftime('%d.%m') }} {{ h }}{% if slot in zajete %} — {{ zajete[slot]['firma'] }}{% endif %}
                    </option>
                {% endfor %}
                </optgroup>
            {% endfor %}
        </select>

        <br>
        <input type="submit" value="Zapisz zmiany">
    </form>

    <p><a href="/admin">← Wróć do panelu</a></p>
</body>
</html>
